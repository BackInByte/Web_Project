(function(e){function t(t){for(var s,i,r=t[0],l=t[1],c=t[2],v=0,d=[];v<r.length;v++)i=r[v],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},o={app:0},a=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"039a":function(e,t,n){"use strict";var s=n("3760"),o=n.n(s);o.a},3760:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-content",[n("Toolbar"),n("router-view")],1)],1)},a=[],i=n("8c4f"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"1000px"},style:{backgroundColor:"#0080ff"},attrs:{align:"center"}},[n("font",{attrs:{size:"+3"}},[e._v("Bienvenue sur Life Manager !")]),n("br"),n("font",{attrs:{size:"+2"}},[e._v("Le site qui va vous simplifier la vie")]),n("div",{staticStyle:{height:"150px",display:"block"}}),n("h2",[e._v("Login")]),n("v-form",{on:{submit:e.login}},[n("input",{attrs:{placeholder:"email",type:"text",name:"email"}}),n("br"),n("input",{attrs:{placeholder:"password",type:"password",name:"password"}}),n("br"),n("v-btn",{attrs:{align:"center",type:"submit",value:"Login"}},[e._v("Valider")])],1)],1)},l=[],c=n("bc3a"),u=n.n(c),v={name:"Login",methods:{login:function(e){e.preventDefault();var t=e.target.elements.email.value,n=e.target.elements.password.value,s=function(){var e={email:t,password:n};u.a.post("/api/login",e).then((function(e){console.log("Logged in"),X.push("/home")})).catch((function(e){console.log("Cannot login"),alert("Mauvais identifiant")}))};s()}}},d=v,p=(n("039a"),n("2877")),h=Object(p["a"])(d,r,l,!1,null,null,null),m=h.exports,f=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},_=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("A propos")]),n("p",[e._v("Life Manager a été développé par deux étudiants ingénieurs de 4ème année")])])}],g={},b=Object(p["a"])(g,f,_,!1,null,null,null),y=b.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{align:"center"}},[n("h2",[e._v("Dashboard")]),n("br"),n("p",[e._v("Email : "+e._s(e.user.login))]),n("br"),n("p",[e._v("Nom : "+e._s(e.user.name))])])},k=[],x=(n("7f7f"),{name:"Login",data:function(){return{user:{login:"",name:""}}},methods:{getUserData:function(){var e=this,t=this;u.a.get("/api/user").then((function(n){console.log(n),t.$set(e.user,"login",n.data.user.email),t.$set(e.user,"name",n.data.user.name),console.log(e.user),console.log(e.user.login)})).catch((function(e){console.log(e),X.push("/")}))}},mounted:function(){this.getUserData()}}),C=x,S=Object(p["a"])(C,E,k,!1,null,null,null),O=S.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"fill-height"},[n("v-col",[e._l(e.messageList,(function(t,s){return n("li",{key:s,attrs:{item:t}},[e._v("\n      "+e._s(t)+"\n    ")])})),n("v-sheet",{attrs:{height:"64"}},[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-btn",{staticClass:"mr-4",attrs:{outlined:""},on:{click:e.setToday}},[e._v("\n          Recentrer sur aujourd'hui\n        ")]),n("v-btn",{attrs:{fab:"",text:"",small:""},on:{click:e.prev}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),n("v-btn",{attrs:{fab:"",text:"",small:""},on:{click:e.next}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),n("v-toolbar-title",[e._v(e._s(e.title))]),n("div",{staticClass:"flex-grow-1"}),n("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-btn",e._g({attrs:{outlined:""}},s),[n("span",[e._v(e._s(e.typeToLabel[e.type]))]),n("v-icon",{attrs:{right:""}},[e._v("mdi-menu-down")])],1)]}}])},[n("v-list",[n("v-list-item",{on:{click:function(t){e.type="day"}}},[n("v-list-item-title",[e._v("Jour")])],1),n("v-list-item",{on:{click:function(t){e.type="week"}}},[n("v-list-item-title",[e._v("Semaine")])],1),n("v-list-item",{on:{click:function(t){e.type="month"}}},[n("v-list-item-title",[e._v("Mois")])],1),n("v-list-item",{on:{click:function(t){e.type="4day"}}},[n("v-list-item-title",[e._v("4 jours")])],1)],1)],1)],1)],1),n("v-sheet",{attrs:{height:"600"}},[n("v-calendar",{ref:"calendar",attrs:{color:"primary",events:e.user_events,"event-color":e.getEventColor,"event-margin-bottom":3,now:e.today,value:"2019-01-08",type:e.type},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay,change:e.updateRange},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),n("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"full-width":"","offset-x":""},on:{loadstart:e.saveEvent,change:e.saveEvent},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[n("v-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[n("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[n("v-toolbar-title",{domProps:{innerHTML:e._s(e.selectedEvent.name)}}),n("div",{staticClass:"flex-grow-1"}),n("PopupUpdate",{attrs:{id:"popupupdate"},on:{newEvent2:e.updateEvent2}}),n("v-btn",{attrs:{icon:""},on:{click:e.deleteEvent}},[n("v-icon",[e._v("mdi-delete")])],1)],1),n("v-card-text",[n("span",{domProps:{innerHTML:e._s(e.selectedEvent.description)}})]),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v("\n              Cancel\n            ")])],1)],1)],1)],1)],2)],1)},F=[],j=(n("a481"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{width:"500","close-on-content-click":!0},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-btn",e._g({attrs:{icon:""}},s),[n("v-icon",[e._v("mdi-pencil")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{attrs:{"close-on-content-click":!0}},[n("v-card-title",[e._v("\n        Mettre à jour un événement\n      ")]),n("v-card-text",[e._v("\n        Complétez les champs des propriétés que vous souhaitez modifier.\n        Seuls les champs complétés seront modifiés.\n        "),n("v-text-field",{attrs:{placeholder:"Entrez un titre",label:"Titre"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),n("v-text-field",{attrs:{placeholder:"Entrez une description",label:"Description"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),n("v-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-btn",e._g({attrs:{value:e.event_date,label:"Cliquez ici pour choisir la date de l'événement"}},s),[e._v("Cliquez ici pour choisir la date de l'événement")])]}}])},[n("v-date-picker",{attrs:{color:"light blue"},model:{value:e.event_date,callback:function(t){e.event_date=t},expression:"event_date"}})],1),e._v("\n         \n        "),n("div",{staticStyle:{height:"25px",display:"block"}}),n("div",{attrs:{align:"center"}},[n("v-btn",{staticClass:"success",on:{click:e.submit}},[e._v("\n          Sauvegarder\n        ")])],1)],1)],1)],1)],1)}),$=[],D={data:function(){return{name:"",description:"",start:"",dialog:!1}},methods:{submit:function(){console.log("Popup Update : "+this.title,this.description,this.event_date),this.$emit("newEvent2",{name:this.title,description:this.description,start:this.event_date}),this.title="",this.description="",this.event_date="",this.dialog=!1}}},T=D,P=Object(p["a"])(T,j,$,!1,null,null,null),L=P.exports,M={name:"",description:"",start:"",index:""},I={name:"Calendar",components:{PopupUpdate:L},props:{event:{name:"",description:"",event_date:""},user:{login:"",name:""}},data:function(){return{today:"",focus:"2019-10-01",type:"month",typeToLabel:{month:"Mois",week:"Semaine",day:"Jour","4day":"4 jours"},start:null,end:null,selectedEvent:{},selectedElement:null,selectedOpen:!1,user_name:"",user_events:[{}],user1_events:[{name:"Anniversaire Clémence",start:"2019-11-15",color:"#FD6C9E"},{name:"Shopping avec Irene",start:"2019-11-14",color:"#FD6C9E"}],user2_events:[{name:"Soirée",start:"2019-11-07",color:"#4285F4"},{name:"Picnic",start:"2019-11-21",color:"#4285F4"},{name:"Projet Web",start:"2019-10-30",color:"#4285F4"}],user3_events:[{name:"Worlds",start:"2019-10-12",color:"#ED7F10"},{name:"Quarts de finale",start:"2019-10-26",color:"#ED7F10"},{name:"Demi finale",start:"2019-11-02",color:"#ED7F10"},{name:"Final",start:"2019-11-10",color:"#ED7F10"}],user4_events:[{name:"LAN CS:GO",start:"2019-11-09",color:"#00FF00"},{name:"Salle",start:"2019-11-12",color:"#00FF00"},{name:"Restau avec les bros",start:"2019-11-18",color:"#00FF00"}],messageList:[]}},computed:{title:function(){var e=this.start,t=this.end;if(!e||!t)return"";var n=this.monthFormatter(e),s=this.monthFormatter(t),o=n===s?"":s,a=e.year,i=t.year,r=a===i?"":i,l=e.day+this.nth(e.day),c=t.day+this.nth(t.day);switch(this.type){case"month":return"".concat(n," ").concat(a);case"week":case"4day":return"".concat(n," ").concat(l," ").concat(a," - ").concat(o," ").concat(c," ").concat(r);case"day":return"".concat(n," ").concat(l," ").concat(a)}return""},monthFormatter:function(){return this.$refs.calendar.getFormatter({timeZone:"UTC",month:"long"})}},methods:{select_event_table:function(e){"emma@email.com"===e&&(this.user_events=this.user1_events,console.log("parameter"+e),console.log("load user1_events in user_events"),console.log(this.user_events)),"user@email.com"===e&&(this.user_events=this.user2_events,console.log("parameter"+e)),"fnatic@email.com"===e&&(this.user_events=this.user3_events,console.log("parameter"+e)),"julien@email.com"===e&&(this.user_events=this.user4_events,console.log("parameter"+e))},updateUserEventsTable:function(e){"user@email.com"===e&&(this.user1_events=this.user_events,localStorage.setItem("user1_events",JSON.stringify(this.user1_events)),console.log(this.user_events),console.log(this.user1_events),console.log("parameter"+e)),"emma@email.com"===e&&(this.user2_events=this.user_events,localStorage.setItem("user2_events",JSON.stringify(this.user2_events)),console.log("parameter"+e)),"fnatic@email.com"===e&&(this.user3_events=this.user_events,localStorage.setItem("user3_events",JSON.stringify(this.user3_events)),console.log("parameter"+e)),"julien@email.com"===e&&(this.user4_events=this.user_events,localStorage.setItem("user4_events",JSON.stringify(this.user4_events)),console.log("parameter"+e))},SetCurrentDate:function(){this.today=(new Date).toJSON().slice(0,10).replace(/-/g,"-")},viewDay:function(e){var t=e.date;this.focus=t,this.type="day"},getEventColor:function(e){return e.color},setToday:function(){this.focus=this.today},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},showEvent:function(e){var t=this,n=e.nativeEvent,s=e.event,o=function(){t.selectedEvent=s,t.selectedElement=n.target,setTimeout((function(){return t.selectedOpen=!0}),10),t.saveEvent()};this.selectedOpen?(this.selectedOpen=!1,setTimeout(o,10)):o(),n.stopPropagation()},updateRange:function(e){var t=e.start,n=e.end;this.start=t,this.end=n},nth:function(e){return e>3&&e<21?"th":["th","st","nd","rd","th","th","th","th","th","th"][e%10]},deleteEvent:function(){console.log("deleteEvent"+this.selectedEvent.name+"name"+this.selectedEvent.name);var e=this.user_events.indexOf(this.selectedEvent);console.log("Index : "+this.user_events.indexOf(this.selectedEvent)),this.user_events.splice(e,1),this.updateUserEventsTable(this.user_name),this.selectedOpen=!1},updateEvent2:function(e){console.log("Calendar update reçu : "+e.name+e.start);var t=M.index;e.name&&(console.log("if name"),this.user_events[t].name=e.name),e.description&&(console.log("if description"),this.user_events[t].description=e.description),e.start&&(console.log("if start"),this.user_events[t].start=e.start),console.log("Event avec index après : "+this.user_events[t].name,this.user_events[t].start),this.updateUserEventsTable(this.user_name),this.selectedOpen=!1},saveEvent:function(){M.name=this.selectedEvent.name,M.description=this.selectedEvent.description,M.start=this.selectedEvent.start,console.log("saveEvent sauvegardé : "+M.name,M.start),M.index=this.user_events.indexOf(this.selectedEvent),console.log("saveEvent index : "+M.index),this.updateUserEventsTable(this.user_name)}},mounted:function(){var e=this;this.$refs.calendar.checkChange(),localStorage.getItem("user1_events")&&(this.user1_events=JSON.parse(localStorage.getItem("user1_events"))),localStorage.getItem("user2_events")&&(this.user2_events=JSON.parse(localStorage.getItem("user2_events"))),localStorage.getItem("user3_events")&&(this.user3_events=JSON.parse(localStorage.getItem("user3_events"))),localStorage.getItem("user4_events")&&(this.user4_events=JSON.parse(localStorage.getItem("user4_events"))),console.log(this.user.login+"test"),console.log("Mounted de Calendar"),this.$root.$on("Calendar",(function(t){e.user_name=t,console.log("this.user_name ="+e.user_name),console.log("mounted de Calendar"),e.select_event_table(t)})),this.SetCurrentDate()},watch:{event:function(){this.event.event_date&&this.event.title&&this.event.description&&(console.log("Event ajouté"),this.user_events.push({name:this.event.title,start:this.event.event_date,color:"#4285F4"}),this.user_events[this.user_events.length-1].description=this.event.description,this.updateUserEventsTable(this.user_name))}}},U=I,J=Object(p["a"])(U,w,F,!1,null,null,null),z=J.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-flex",{staticClass:"mt-4 mb-3"},[n("p",[e._v("Calendrier de "+e._s(e.user.name))]),n("Popup",{on:{newEvent1:e.updateEvent1}}),n("Calendar",{attrs:{event:e.evt,user:e.user}})],1)],1)},N=[],R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-btn",e._g({},s),[e._v("\n        Ajouter un événement\n      ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v("\n        Ajouter un événement\n      ")]),n("v-card-text",[n("v-form",{ref:"Popup"},[e._v("\n\n          Merci de remplir les champs suivants :\n          "),n("v-text-field",{attrs:{placeholder:"Entrez un titre",label:"Titre",rules:e.inputRules},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),n("v-text-field",{attrs:{placeholder:"Entrez une description",label:"Description",rules:e.inputRules},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),n("v-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-btn",e._g({attrs:{value:e.event_date,label:"Cliquez ici pour choisir la date de l'événement",rules:e.inputRules}},s),[e._v("Cliquez ici pour choisir la date de l'événement")])]}}])},[n("v-date-picker",{attrs:{color:"light blue"},model:{value:e.event_date,callback:function(t){e.event_date=t},expression:"event_date"}})],1),e._v("\n           \n          "),n("div",{staticStyle:{height:"25px",display:"block"}}),n("div",{attrs:{align:"center"}},[n("v-btn",{staticClass:"success",on:{click:e.submit}},[e._v("\n            Sauvegarder\n          ")])],1)],1)],1)],1)],1)],1)},q=[],H={data:function(){return{title:"",description:"",event_date:"",dialog:!1,inputRules:[function(e){return e.length>0||"Champ requis"}]}},methods:{submit:function(){this.$refs.Popup.validate()&&(this.$emit("newEvent1",{title:this.title,description:this.description,event_date:this.event_date}),this.title="",this.description="",this.event_date="",this.dialog=!1)}}},B=H,W=Object(p["a"])(B,R,q,!1,null,null,null),G=W.exports,Q={name:"Home",components:{Popup:G,Calendar:z},data:function(){return{evt:{title:"",description:"",event_date:""},user:{login:"",name:""}}},methods:{updateEvent1:function(e){this.evt=e,console.log("Home : "+this.evt.title,this.evt.description,this.evt.event_date)},loginUser:function(){var e=this,t=this;u.a.get("/api/user").then((function(n){console.log(n),t.$set(e.user,"login",n.data.user.email),t.$set(e.user,"name",n.data.user.name),console.log(e.user.login),e.load_Events_table(String(e.user.login))})).catch((function(e){console.log(e),X.push("/")}))},load_Events_table:function(e){console.log("Appel fonction de Events"),console.log("parameter"+e),this.$root.$emit("Calendar",e)}},mounted:function(){console.log("mounted de Home"),this.loginUser(),console.log(this.user.login),console.log(String(this.user.login))}},V=Q,Z=Object(p["a"])(V,A,N,!1,null,null,null),K=Z.exports;s["default"].use(i["a"]);var X=new i["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Login",component:m},{path:"/about",name:"About",component:y},{path:"/dashboard",name:"Dashboard",component:O},{path:"/calendar",name:"Calendar",component:z},{path:"/home",name:"Home",component:K}]}),Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar",[n("v-toolbar-title",{staticClass:"headline text-uppercase"},[e._v("Life Manager")]),n("div",{staticClass:"flex-grow-1"}),n("v-toolbar-items"),e.$vuetify.breakpoint.smAndUp?[n("v-btn",{on:{click:e.calendar}},[e._v("Calendrier")]),e._v("\n       \n      "),n("v-btn",{on:{click:e.dashboard}},[e._v("Dashboard")]),e._v("\n       \n      "),n("v-btn",{on:{click:e.logout}},[e._v("Déconnexion")]),e._v("\n       \n      "),n("v-btn",{on:{click:e.about}},[e._v("A propos")])]:e._e()],2)],1)},ee=[],te={methods:{about:function(){X.push("/about")},login:function(){X.push("/")},calendar:function(){X.push("home")},dashboard:function(){X.push("/dashboard")},logout:function(e){u.a.get("/api/logout").then((function(){X.push("/")}))}}},ne=te,se=Object(p["a"])(ne,Y,ee,!1,null,null,null),oe=se.exports,ae={name:"App",components:{Toolbar:oe},data:function(){return{evt:{title:"",description:"",event_date:""}}},methods:{updateEvent1:function(e){this.evt=e,console.log(this.evt.title,this.evt.description,this.evt.event_date)},logout:function(e){u.a.get("/api/logout").then((function(){X.push("/")}))}}},ie=ae,re=Object(p["a"])(ie,o,a,!1,null,null,null),le=re.exports,ce=n("ce5b"),ue=n.n(ce);n("bf40");s["default"].use(ue.a);var ve=new ue.a({theme:{themes:{light:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},icons:{iconfont:"mdi"}});n("d5e8"),n("5363");s["default"].config.productionTip=!1,new s["default"]({router:X,vuetify:ve,render:function(e){return e(le)}}).$mount("#app")}});
//# sourceMappingURL=app.d6dedd65.js.map